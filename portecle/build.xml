<?xml version="1.0"?>

<project name="portecle" basedir="." default="build">

  <property name="root" value="." />
  <property name="src" value="${root}/src" />
  <property name="build" value="${root}/build" />
  <property name="dist" value="${root}/dist" />
  <property name="conf" value="${root}/conf" />
  <property name="lib" value="${root}/lib" />

  <property name="jar" value="portecle.jar" />
  <property name="doc" value="${root}/doc" />

  <path id="build.path">
    <pathelement path="${classpath}" />
    <fileset dir="${lib}">
      <include name="**/*.jar"/>
    </fileset>
  </path>

  <target name="build-classes">
    <mkdir dir="${build}/classes" />
    <javac srcdir="${src}/main" destdir="${build}/classes" source="1.4">
      <classpath refid="build.path" />
    </javac>
  </target>

  <target name="build" depends="build-classes">
    <mkdir dir="${dist}" />
    <jar jarfile="${dist}/${jar}" manifest="${conf}/MANIFEST.MF">
      <fileset dir="${build}/classes" includes="*/**" />
      <fileset dir="${src}/main" includes="**/*.properties" />
      <fileset dir="${src}/main" includes="**/*.gif" />
      <fileset dir="${root}" includes="doc/**" />
    </jar>
    <copy todir="${dist}">
      <fileset dir="${lib}" includes="*.jar" />
    </copy>
  </target>

  <target name="javadoc">
    <mkdir dir="${build}/api" />
    <javadoc destdir="${build}/api" source="1.4" private="yes">
      <packageset dir="${src}/main" defaultexcludes="yes">
        <include name="net/sf/portecle/**" />
      </packageset>
    </javadoc>
  </target>

  <target name="all" depends="build,javadoc" />

  <target name="clean">
    <delete dir="${build}" />
  </target>

  <target name="distclean" depends="clean">
    <delete dir="${dist}" />
  </target>

</project>
